# ğŸ—ï¸ Architecture Overview

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Internet / User                          â”‚
â”‚                              â†“ â†‘                                 â”‚
â”‚                    HTTP Port 80 (All Traffic)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Ubuntu VM (Cloud)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    Docker Network                          â”‚ â”‚
â”‚  â”‚                   (mean-network)                           â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚  â”‚  â”‚         Nginx Reverse Proxy                â”‚            â”‚ â”‚
â”‚  â”‚  â”‚         Container: mean-nginx              â”‚            â”‚ â”‚
â”‚  â”‚  â”‚         Port: 80 (exposed)                 â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Routes:                             â”‚  â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  / â†’ frontend:80                     â”‚  â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  /api/* â†’ backend:8080               â”‚  â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  /health â†’ health check              â”‚  â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚  â”‚              â”‚                  â”‚                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚   Frontend Service   â”‚  â”‚   Backend Service        â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   Container:         â”‚  â”‚   Container:             â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   mean-frontend      â”‚  â”‚   mean-backend           â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Angular 15 App  â”‚ â”‚  â”‚  â”‚ Node.js/Express  â”‚    â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Served by Nginx â”‚ â”‚  â”‚  â”‚ REST API         â”‚    â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â”‚ Port: 80        â”‚ â”‚  â”‚  â”‚ Port: 8080       â”‚    â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚           â”‚              â”‚    â”‚ â”‚
â”‚  â”‚                            â”‚           â”‚              â”‚    â”‚ â”‚
â”‚  â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚                                         â”‚                  â”‚ â”‚
â”‚  â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚                             â”‚   Database Service       â”‚   â”‚ â”‚
â”‚  â”‚                             â”‚   Container:             â”‚   â”‚ â”‚
â”‚  â”‚                             â”‚   mean-mongodb           â”‚   â”‚ â”‚
â”‚  â”‚                             â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚ MongoDB 6.0      â”‚    â”‚   â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚ Port: 27017      â”‚    â”‚   â”‚ â”‚
â”‚  â”‚                             â”‚  â”‚ Volume: Mounted  â”‚    â”‚   â”‚ â”‚
â”‚  â”‚                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚ â”‚
â”‚  â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  Volume: mongodb_data (Persistent Storage)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CI/CD Pipeline Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Developer                                â”‚
â”‚                    git push to main/master                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      GitHub Repository                          â”‚
â”‚                 (crud-dd-task-mean-app)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                  Triggers GitHub Actions
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Actions Runner                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Job 1: Build and Push                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ 1. Checkout code                                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 2. Setup Docker Buildx                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 3. Login to Docker Hub                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 4. Build backend image                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    - Tag: latest & commit-sha                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 5. Build frontend image                              â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    - Tag: latest & commit-sha                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 6. Push images to Docker Hub                         â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Docker Hub                               â”‚
â”‚  Images:                                                        â”‚
â”‚  - username/mean-backend:latest                                 â”‚
â”‚  - username/mean-frontend:latest                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Actions Runner                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Job 2: Deploy to VM                           â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚ 1. Setup SSH credentials                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 2. Copy docker-compose.yml to VM                     â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 3. Copy nginx config to VM                           â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 4. SSH into VM and execute:                          â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    - docker compose pull                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    - docker compose down                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    - docker compose up -d                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚ 5. Verify deployment                                 â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“ SSH
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ubuntu VM                                â”‚
â”‚                  Application Running                             â”‚
â”‚              http://<vm-ip> accessible                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Request Flow

### User Accesses Frontend

```
User Browser
    â†“
http://<vm-ip>/
    â†“
Nginx Reverse Proxy (Port 80)
    â†“
Routes to â†’ Frontend Container (Port 80)
    â†“
Nginx serves Angular static files
    â†“
Angular app loaded in browser
```

### API Request Flow

```
Angular App (in browser)
    â†“
HTTP Request: /api/tutorials
    â†“
Nginx Reverse Proxy (Port 80)
    â†“
Routes /api/* â†’ Backend Container (Port 8080)
    â†“
Express.js API Handler
    â†“
Mongoose ODM
    â†“
MongoDB Container (Port 27017)
    â†“
Data retrieved/stored
    â†“
Response back through chain
    â†“
Angular app receives data
```

---

## Network Topology

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Docker Bridge Network                       â”‚
â”‚                     (mean-network)                           â”‚
â”‚                                                              â”‚
â”‚   Container          Internal IP      Exposed Ports          â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚   nginx             172.18.0.2        80 â†’ Host:80           â”‚
â”‚   frontend          172.18.0.3        80 (internal)          â”‚
â”‚   backend           172.18.0.4        8080 (internal)        â”‚
â”‚   mongodb           172.18.0.5        27017 (internal)       â”‚
â”‚                                                              â”‚
â”‚   DNS Resolution:                                            â”‚
â”‚   - nginx        â†’ 172.18.0.2                                â”‚
â”‚   - frontend     â†’ 172.18.0.3                                â”‚
â”‚   - backend      â†’ 172.18.0.4                                â”‚
â”‚   - mongodb      â†’ 172.18.0.5                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow

### Creating a Tutorial

```
1. User fills form in Angular app
        â†“
2. Angular service sends POST /api/tutorials
        â†“
3. Nginx receives request on /api/tutorials
        â†“
4. Nginx proxies to backend:8080/api/tutorials
        â†“
5. Express route handler receives request
        â†“
6. Controller validates data
        â†“
7. Mongoose model creates document
        â†“
8. MongoDB stores document in dd_db.tutorials collection
        â†“
9. MongoDB returns inserted document
        â†“
10. Controller formats response
        â†“
11. Express sends JSON response
        â†“
12. Nginx forwards response
        â†“
13. Angular receives response
        â†“
14. UI updates with new tutorial
```

---

## Container Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  mongodb   â”‚ â† No dependencies (starts first)
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ depends_on
      â†“
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚  backend   â”‚ â† Depends on: mongodb
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ depends_on
      â†“
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚  frontend  â”‚ â† Depends on: backend
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ depends_on
      â†“
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚   nginx    â”‚ â† Depends on: frontend, backend
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Storage Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Ubuntu VM Filesystem                    â”‚
â”‚                                                              â”‚
â”‚   /home/ubuntu/mean-app/                                     â”‚
â”‚   â”œâ”€â”€ docker-compose.yml        (Orchestration config)       â”‚
â”‚   â”œâ”€â”€ nginx/                                                 â”‚
â”‚   â”‚   â””â”€â”€ nginx.conf            (Reverse proxy config)       â”‚
â”‚   â””â”€â”€ .env                      (Environment variables)      â”‚
â”‚                                                              â”‚
â”‚   Docker Volumes:                                            â”‚
â”‚   /var/lib/docker/volumes/                                   â”‚
â”‚   â””â”€â”€ mean-app_mongodb_data/                                 â”‚
â”‚       â””â”€â”€ _data/                (Persistent MongoDB data)    â”‚
â”‚           â”œâ”€â”€ db/                                            â”‚
â”‚           â”œâ”€â”€ journal/                                       â”‚
â”‚           â””â”€â”€ ...                                            â”‚
â”‚                                                              â”‚
â”‚   Docker Images (cached):                                    â”‚
â”‚   /var/lib/docker/overlay2/                                  â”‚
â”‚   â”œâ”€â”€ <image-layers>/                                        â”‚
â”‚   â””â”€â”€ ...                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Security Layers                       â”‚
â”‚                                                              â”‚
â”‚  Layer 1: Cloud Provider Security Group                      â”‚
â”‚  â”œâ”€â”€ Port 22 (SSH) - Restricted to specific IPs              â”‚
â”‚  â”œâ”€â”€ Port 80 (HTTP) - Open to internet                       â”‚
â”‚  â””â”€â”€ Port 443 (HTTPS) - Optional                             â”‚
â”‚                                                              â”‚
â”‚  Layer 2: VM Firewall (UFW)                                  â”‚
â”‚  â”œâ”€â”€ Port 22 - SSH access                                    â”‚
â”‚  â”œâ”€â”€ Port 80 - HTTP traffic                                  â”‚
â”‚  â””â”€â”€ Deny all other incoming traffic                         â”‚
â”‚                                                              â”‚
â”‚  Layer 3: Docker Network Isolation                           â”‚
â”‚  â”œâ”€â”€ Only Nginx exposed to host                              â”‚
â”‚  â”œâ”€â”€ Backend accessible only within network                  â”‚
â”‚  â””â”€â”€ MongoDB accessible only within network                  â”‚
â”‚                                                              â”‚
â”‚  Layer 4: Application Security                               â”‚
â”‚  â”œâ”€â”€ CORS configured in Express                              â”‚
â”‚  â”œâ”€â”€ Environment variables for secrets                       â”‚
â”‚  â”œâ”€â”€ GitHub Secrets for CI/CD credentials                    â”‚
â”‚  â””â”€â”€ SSH key authentication (no passwords)                   â”‚
â”‚                                                              â”‚
â”‚  Layer 5: Data Security                                      â”‚
â”‚  â”œâ”€â”€ MongoDB data in persistent volume                       â”‚
â”‚  â”œâ”€â”€ No database exposed to internet                         â”‚
â”‚  â””â”€â”€ Container restart on failure                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Scaling Considerations

### Current Architecture (Single VM)

```
Single VM:
- 1 Nginx instance
- 1 Frontend instance
- 1 Backend instance
- 1 MongoDB instance
```

### Horizontal Scaling (Future)

```
Load Balancer
    â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â†“         â†“        â†“        â†“
VM1      VM2      VM3      ...
(Same containers on each)
         â†“
Shared Database Cluster
```

### Container Scaling (Docker Swarm/Kubernetes)

```
Load Balancer
    â†“
Nginx Replicas (3x)
    â†“
Frontend Replicas (5x) - Stateless, easy to scale
    â†“
Backend Replicas (3x) - Stateless, can scale
    â†“
MongoDB Replica Set (3x) - Primary + Secondary nodes
```

---

## Monitoring Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Monitoring Points                        â”‚
â”‚                                                             â”‚
â”‚  1. Application Level                                       â”‚
â”‚     - /health endpoint                                      â”‚
â”‚     - API response times                                    â”‚
â”‚     - Error rates                                           â”‚
â”‚                                                             â”‚
â”‚  2. Container Level                                         â”‚
â”‚     - docker compose ps (status)                            â”‚
â”‚     - docker stats (CPU, memory)                            â”‚
â”‚     - Container logs                                        â”‚
â”‚                                                             â”‚
â”‚  3. VM Level                                                â”‚
â”‚     - CPU usage (htop)                                      â”‚
â”‚     - Memory usage                                          â”‚
â”‚     - Disk space (df -h)                                    â”‚
â”‚     - Network traffic                                       â”‚
â”‚                                                             â”‚
â”‚  4. Application Metrics                                     â”‚
â”‚     - Total tutorials count                                 â”‚
â”‚     - API request count                                     â”‚
â”‚     - MongoDB connections                                   â”‚
â”‚     - Active users                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Technology Stack Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Technology Stack                        â”‚
â”‚                                                             â”‚
â”‚  Frontend:                                                  â”‚
â”‚  â”œâ”€â”€ Angular 15                                             â”‚
â”‚  â”œâ”€â”€ TypeScript 4.8                                         â”‚
â”‚  â”œâ”€â”€ Bootstrap 4                                            â”‚
â”‚  â”œâ”€â”€ RxJS 7                                                 â”‚
â”‚  â””â”€â”€ Served by: Nginx Alpine                                â”‚
â”‚                                                             â”‚
â”‚  Backend:                                                   â”‚
â”‚  â”œâ”€â”€ Node.js 18                                             â”‚
â”‚  â”œâ”€â”€ Express.js 4                                           â”‚
â”‚  â”œâ”€â”€ Mongoose 6                                             â”‚
â”‚  â”œâ”€â”€ CORS middleware                                        â”‚
â”‚  â””â”€â”€ Base image: node:18-alpine                             â”‚
â”‚                                                             â”‚
â”‚  Database:                                                  â”‚
â”‚  â”œâ”€â”€ MongoDB 6.0                                            â”‚
â”‚  â”œâ”€â”€ Persistent volume                                      â”‚
â”‚  â””â”€â”€ Base image: mongo:6.0                                  â”‚
â”‚                                                             â”‚
â”‚  Reverse Proxy:                                             â”‚
â”‚  â”œâ”€â”€ Nginx Alpine                                           â”‚
â”‚  â”œâ”€â”€ Gzip compression                                       â”‚
â”‚  â””â”€â”€ Request routing                                        â”‚
â”‚                                                             â”‚
â”‚  DevOps:                                                    â”‚
â”‚  â”œâ”€â”€ Docker 20.10+                                          â”‚
â”‚  â”œâ”€â”€ Docker Compose 2.0+                                    â”‚
â”‚  â”œâ”€â”€ GitHub Actions                                         â”‚
â”‚  â”œâ”€â”€ Docker Hub                                             â”‚
â”‚  â””â”€â”€ Ubuntu 22.04 LTS                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides:
- âœ… **Scalability**: Can scale containers horizontally
- âœ… **Reliability**: Container restart policies
- âœ… **Security**: Multiple security layers
- âœ… **Performance**: Nginx caching and compression
- âœ… **Maintainability**: Clear separation of concerns
- âœ… **Automation**: Full CI/CD pipeline
